{"version":3,"sources":["webpack:///./src/utils.js","webpack:///./src/models.js","webpack:///./src/reducers/root.js","webpack:///./src/store.js","webpack:///./src/components/Plot/stylePlot.scss","webpack:///./src/components/Plot/stylePlot.scss?24f5","webpack:///./src/components/Plot/Plot.js","webpack:///./src/components/Plot/index.js","webpack:///./src/components/App/styleApp.scss","webpack:///./src/components/App/styleApp.scss?188b","webpack:///./src/components/App/App.js","webpack:///./src/components/App/index.js","webpack:///./src/index.js","webpack:///./src/constants.js"],"names":["createReducer","initialState","handlers","state","arguments","length","undefined","action","hasOwnProperty","type","_moize","__webpack_require__","binder","_moize2","default","fn","_len","args1","Array","_key","_len2","args2","_key2","concat","get","path","split","l","a","i","upo","oldObject","newValues","Object","assign","mod","b","_constants","_utils","colors","vs","VF","W","SJ","s","getColor","map","d","_materialColors2","makeNode","car","next","prev","moveCar","pos","lane","x","x0","x1","y","y0","y1","id","orientation","Lane","direction","_classCallCheck","this","_a","_slicedToArray","_b","N","first","last","_uniqueId2","includes","node","temp","Signal","row","col","t","lanesOut","push","CYCLE","range","fill","even","Graph","k","_ref","matrix","signals","apply","_toConsumableArray","cars","lanes","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","Symbol","iterator","done","value","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_arr","_i","or","addLaneOut","err","return","history","makeCars","q","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","carsPerLane","space","LANE_LENGTH","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","newCar","color","nextTimeTurning","Math","random","TURN","dt","_this","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","tick","_loop","signal","signalOpen","_temp","dx","distanceRemaining","turning","nextLane","find","Error","pop","unshift","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","HIST","shift","model","defaultState","time","timerOn","mfdState","run","payload","getMFDState","_root","store","createStore","_root2","interval","Date","now","subscribe","getState","setInterval","dispatch","clearInterval","exports","module","locals","dot","bg","fd","content","options","hmr","transform","insertInto","_reactRedux","CN","K0","v","FDLine","_react2","createElement","className","_stylePlot2","connect","_ref2","_ref2$mfdState","plot","width","height","r","main","text","button","svg","ns","ew","inputs","_react","_d3Scale","scale2","scaleLinear","domain","Lanes","_","_styleApp2","key","CarComponent","_props","props","timerToggle","setK","e","target","kState","qState","onClick","min","max","step","onChange","toFixed","_Plot2","_reactDom","container","document","getElementById","render","Provider","_store2","_App2"],"mappings":"8KAqBgBA,cAAT,SACLC,EACAC,GAEA,OAAO,WAAwD,IAAvCC,EAAuCC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA5BH,EAAcM,EAAcH,UAAA,GAC7D,OAAOF,EAASM,eAAeD,EAAOE,MAClCP,EAASK,EAAOE,MAAMN,EAAOI,GAC7BJ,IA3BR,MAAAO,EAAAC,EAAA,wCAEaC,UAAS,EAAAC,EAAAC,SAAM,SAACC,GAAD,QAAAC,EAAAZ,UAAAC,OAAQY,EAARC,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAQF,EAARE,EAAA,GAAAf,UAAAe,GAAA,OAAkB,mBAAAC,EAAAhB,UAAAC,OAAIgB,EAAJH,MAAAE,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAID,EAAJC,GAAAlB,UAAAkB,GAAA,OAC5CP,eAAME,EAANM,OAAgBF,OAGLG,MAAM,SAACC,GAClB,IAAIC,EAAQD,EAAKC,MAAM,KACnBC,EAAID,EAAMrB,OACd,OAAO,SAAAuB,GACL,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAGE,IAAKD,EAAIA,EAAEF,EAAMG,IACxC,OAAOD,IAIEE,MAAM,SAACC,EAAeC,GAAhB,OACjBC,OAAOC,UAAWH,EAAWC,IAelBG,MAAM,SAACP,EAAWQ,GAAZ,OAAmCR,EAAIQ,EAAIA,GAAKA,gxBC9BnEC,EAAA1B,EAAA,OACAA,EAAA,KACA2B,EAAA3B,EAAA,QACAA,EAAA,sJAKA,IACQiB,EACJQ,EASIG,EAUAZ,EACFE,EAtBAW,GACEZ,EAAIS,EAAAI,GAAAJ,EAAAK,EAAS,EACjBN,EAAIC,EAAAK,EAAAL,EAAAM,GACC,SAACC,GACN,OAAIA,OAAe,EACVA,GAAKhB,EAAGS,EAAAI,GACLL,GAAKQ,UAIfC,GACEN,GACJ,MACA,OACA,QACA,SACA,OACA,SACA,YACA,QACAO,IAAI,SAAAC,GAAA,OAAKC,EAAAlC,QAAGiC,GAAG,OACXpB,EAAIY,EAAOlC,OAAS,EACtBwB,EAAI,EACD,kBAAMU,EAAOV,IAAMF,KAoBtBsB,EAAW,SAACC,GAAD,OAAkBA,MAAKC,KAAM,KAAMC,KAAM,OAmBpDC,EAAU,SAACH,EAAUI,EAAaC,GACtCL,EAAIM,EAAID,EAAKE,GAAKH,iBAAqBC,EAAKG,GAAKH,EAAKE,IACtDP,EAAIS,EAAIJ,EAAKK,GAAKN,iBAAqBC,EAAKM,GAAKN,EAAKK,IACtDV,EAAII,IAAMA,EACVJ,EAAIK,KAAOA,EAAKO,GAChBZ,EAAIa,YAAcR,EAAKQ,aAGZC,oBAYX,SAAAA,EAAYpC,EAAUQ,EAAU6B,GAAsBC,EAAAC,KAAAH,GAAA,IAAAI,EAAAC,EACrCzC,EADqC,GAC/CgC,EAD+CQ,EAAA,GAC3CX,EAD2CW,EAAA,GAAAE,EAAAD,EAErCjC,EAFqC,GAE/CyB,EAF+CS,EAAA,GAE3CZ,EAF2CY,EAAA,GAGzC,IAAPZ,GAAYD,IAAOpB,EAAAkC,EAAI,EAAGb,MACd,IAAPG,GAAYD,IAAOvB,EAAAkC,EAAI,EAAGV,MAC1BA,IAAOxB,EAAAkC,EAAI,GAAY,IAAPX,EAAUA,MAC1BF,IAAOrB,EAAAkC,EAAI,GAAY,IAAPd,IAAUA,OACnCxB,OAAOC,OAAOiC,MACZK,MAAO,KACPC,KAAM,KACNR,YACArC,IACAQ,IACAqB,KACAG,KACAF,KACAG,KACAC,IAAI,EAAAY,EAAA5D,WACJiD,YAAa,KAAKY,SAASV,GAAa,KAAO,iDAI3Cf,GACN,IAAI0B,EAAO3B,EAASC,GACpB,GAAmB,OAAfiB,KAAKK,MACPL,KAAKK,MAAQL,KAAKM,KAAOG,MACpB,CACL,IAAIC,EAAOV,KAAKK,MAChBL,KAAKK,MAAQI,EACbA,EAAKzB,KAAO0B,EACZA,EAAKzB,KAAOwB,gCAIX1B,GACH,IAAI0B,EAAO3B,EAASC,GACpB,GAAmB,OAAfiB,KAAKK,MACPL,KAAKK,MAAQL,KAAKM,KAAOG,MACpB,CACL,IAAIC,EAAOV,KAAKM,KAChBN,KAAKM,KAAOG,EACZA,EAAKxB,KAAOyB,EACZA,EAAK1B,KAAOyB,iCAKd,GAAkB,OAAdT,KAAKM,KACP,OAAO,KAET,IAAII,EAAOV,KAAKM,KAIhB,OAHAN,KAAKM,KAAON,KAAKM,KAAKrB,KAClBe,KAAKM,KAAMN,KAAKM,KAAKtB,KAAO,KAC3BgB,KAAKK,MAAQ,KACXK,WAIEC,sBAOX,SAAAA,EAAYC,EAAaC,GAAad,EAAAC,KAAAW,GACpC7C,OAAOC,OAAOiC,MACZY,MACAC,MACAjB,YAAa,KACbkB,EAAG,EACHnB,IAAI,EAAAY,EAAA5D,WACJoE,2DAGO3B,GACTY,KAAKe,SAASC,KAAK5B,kCAGnBY,KAAKc,GAAKd,KAAKc,EAAI,GAAV5C,EAAA+C,MACLjB,KAAKc,EAAI5C,EAAA+C,MAAQ,EAAGjB,KAAKJ,YAAc,KACtCI,KAAKJ,YAAc,cAItBsB,EAAQnE,WACXoE,KAAK,GACLxC,IAAI,SAACC,EAAGlB,GAAJ,OAAUA,IAEX0D,EAAO,SAACxC,GAAD,OAAeA,EAAI,GAAM,KAEzByC,iBAgCX,SAAAA,EAAYC,GAAW,IAAAC,EAAAxB,EAAAC,KAAAqB,GAErBrB,KAAKwB,OAASN,EAAMvC,IAAI,SAAAiC,GAAA,OAAOM,EAAMvC,IAAI,SAAAkC,GAAA,OAAO,IAAIF,EAAOC,EAAKC,OAChEb,KAAKyB,SAAUF,MAAGnE,OAAHsE,MAAAH,wHAAAI,CAAa3B,KAAKwB,SACjCxB,KAAK4B,QACL5B,KAAK6B,SALgB,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAA7F,EAAA,IAQrB,QAAA8F,EAAAC,EAAgBhB,EAAhBiB,OAAAC,cAAAN,GAAAG,EAAAC,EAAAlD,QAAAqD,MAAAP,GAAA,OAASlB,EAATqB,EAAAK,MAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAtG,EAAA,IACE,QAAAuG,EAAAC,EAAgBzB,EAAhBiB,OAAAC,cAAAG,GAAAG,EAAAC,EAAA3D,QAAAqD,MAAAE,GAAA,EACE,IADF,IAAS1B,EAAT6B,EAAAJ,MAAAM,GACkB,KAAM,MAAtBC,EAAA,EAAAA,EAAAD,EAAA1G,OAAA2G,IAA6B,CAAxB,IAAIC,OACHhD,EACK,OAAPgD,EAAe1B,EAAKP,GAAO,IAAM,IAAOO,EAAKR,GAAO,IAAM,IACxD3C,EACK,OAAP6E,IACK,EAAA3E,EAAAH,KAAIoD,EAAKP,GAAOD,EAAM,EAAIA,EAAM,EAAhC1C,EAAAkC,GAAuCS,IACvCD,GAAK,EAAAzC,EAAAH,KAAIoD,EAAKR,GAAOC,EAAM,EAAIA,EAAM,EAAhC3C,EAAAkC,IACRhB,EAAO,IAAIS,GAAMe,EAAKC,GAAM5C,EAAG6B,GACnCE,KAAKwB,OAAOZ,GAAKC,GAAKkC,WAAW3D,GACjCY,KAAK6B,MAAMb,KAAK5B,IAXtB,MAAA4D,GAAAR,GAAA,EAAAC,EAAAO,EAAA,aAAAT,GAAAI,EAAAM,QAAAN,EAAAM,SAAA,WAAAT,EAAA,MAAAC,KARqB,MAAAO,GAAAjB,GAAA,EAAAC,EAAAgB,EAAA,aAAAlB,GAAAI,EAAAe,QAAAf,EAAAe,SAAA,WAAAlB,EAAA,MAAAC,GAqBrBhC,KAAKkD,UAAY5B,EAAG,IACpBtB,KAAKmD,SAAS7B,mDA7Cd,IAAI9D,EAAIwC,KAAKkD,QAAQhH,OACjBoF,EAAI,EACN8B,EAAI,EAHwBC,GAAA,EAAAC,GAAA,EAAAC,OAAApH,EAAA,IAI9B,QAAAqH,EAAAC,EAAczD,KAAKkD,QAAnBf,OAAAC,cAAAiB,GAAAG,EAAAC,EAAAzE,QAAAqD,MAAAgB,GAAA,OAASzE,EAAT4E,EAAAlB,MAA6BhB,GAAK1C,EAAE,GAAMwE,GAAKxE,EAAE,IAJnB,MAAAoE,GAAAM,GAAA,EAAAC,EAAAP,EAAA,aAAAK,GAAAI,EAAAR,QAAAQ,EAAAR,SAAA,WAAAK,EAAA,MAAAC,GAK9B,OAAQjC,EAAI9D,EAAG4F,EAAI5F,oCAGZ8D,GACPtB,KAAKsB,EAAIA,EACT,IAAIoC,EAAcpC,EAClBtB,KAAK4B,QACL,IAlJazC,EAAaC,EACxBC,EACAG,EAgJEmE,EAAQzF,EAAA0F,YAAcF,EAJRG,GAAA,EAAAC,GAAA,EAAAC,OAAA5H,EAAA,IAKlB,QAAA6H,EAAAC,EAAiBjE,KAAK6B,MAAtBM,OAAAC,cAAAyB,GAAAG,EAAAC,EAAAjF,QAAAqD,MAAAwB,GAAA,EAA6B,KAApBzE,EAAoB4E,EAAA1B,MAC3BlD,EAAKiB,MAAQjB,EAAKkB,KAAO,KACzB,IAAK,IAAI5C,EAAI,EAAGA,EAAIgG,EAAahG,IAAK,CACpC,IACIwG,GAvJK/E,EAsJCzB,EAAIiG,OArJhBtE,OACAG,EADAH,GADwBD,EAuJIA,GAtJnBE,GAAKH,iBAAqBC,EAAKG,GAAKH,EAAKE,IAClDE,EAAIJ,EAAKK,GAAKN,iBAAqBC,EAAKM,GAAKN,EAAKK,KAEpDE,IAAI,EAAAY,EAAA5D,WACJwH,MAAOzF,IACPS,MACAE,IACAG,IACAJ,KAAMA,EAAKO,GACXC,YAAaR,EAAKQ,YAClBwE,gBAAiBC,KAAKC,UAALpG,EAAAqG,OA6IbnF,EAAK4B,KAAKkD,GACVlE,KAAK4B,KAAKZ,KAAKkD,KAXD,MAAAlB,GAAAc,GAAA,EAAAC,EAAAf,EAAA,aAAAa,GAAAI,EAAAhB,QAAAgB,EAAAhB,SAAA,WAAAa,EAAA,MAAAC,uCAyChBS,GAAY,IAAAC,EAAAzE,KAAA0E,GAAA,EAAAC,GAAA,EAAAC,OAAAzI,EAAA,IAEd,QAAA0I,EAAAC,EAAmB9E,KAAKyB,QAAxBU,OAAAC,cAAAsC,GAAAG,EAAAC,EAAA9F,QAAAqD,MAAAqC,GAAA,GAAAG,EAAAvC,MAAwCyC,QAF1B,MAAA/B,GAAA2B,GAAA,EAAAC,EAAA5B,EAAA,aAAA0B,GAAAI,EAAA7B,QAAA6B,EAAA7B,SAAA,WAAA0B,EAAA,MAAAC,GAGd,IAAIxB,EAAI,EAHM4B,EAAA,SAIL5F,GAIP,IAHA,IAAIsB,EAAOtB,EAAKiB,MACZ4E,EAASR,EAAKjD,OAAOpC,EAAKnB,EAAE,IAAImB,EAAKnB,EAAE,IACvCiH,EAAaD,EAAOrF,YAAYY,SAASpB,EAAKU,WAC3CY,GAAM,KAAAyE,EACSzE,EAAd3B,EADKoG,EACLpG,IAAKC,EADAmG,EACAnG,KACPoG,EAAK,EAKT,GAJIpG,IACFoG,EAAK/G,EAAGW,EAAKD,IAAII,IAAMJ,EAAII,KAC3BD,EAAQH,EAAKA,EAAII,IAAMiG,EAAIhG,KAExBJ,EAAM,CACT,IAAIqG,EAAoBnH,EAAA0F,YAAc7E,EAAII,IACrC+F,EAGE,WACL,IAAII,EAAUjB,KAAKC,SAALpG,EAAAqG,KACVgB,EAAWN,EAAOlE,SAASyE,KAC7B,SAAA5G,GAAA,OAAMA,EAAEgB,cAAgBR,EAAKQ,cAAiB0F,IAEhD,IAAKC,EAAU,MAAME,MAAM,yBACtBF,EAASlF,OAOZ+E,EAAK/G,EAAGkH,EAASlF,MAAMtB,IAAII,IAAMkG,IACxBA,GACPjG,EAAKsG,MACLxG,EAAQH,EAAKqG,EAAKC,EAAmBE,GAErCA,EAASI,QAAQ5G,IAEjBG,EAAQH,EAAKA,EAAII,IAAMiG,EAAIhG,IAb7BA,EAAKsG,MACLN,OACAlG,EAAQH,EAAKb,EAAAI,GAAK+G,EAAmBE,GAErCA,EAASI,QAAQ5G,IAXd,IAFLqG,EAAK/G,EAAGgH,GACRnG,EAAQH,EAAKA,EAAII,IAAMiG,EAAIhG,IA0B/BgE,GAAKgC,EACL1E,EAAO1B,IA9CG4G,GAAA,EAAAC,GAAA,EAAAC,OAAA3J,EAAA,IAId,QAAA4J,EAAAC,EAAiBhG,KAAK6B,MAAtBM,OAAAC,cAAAwD,GAAAG,EAAAC,EAAAhH,QAAAqD,MAAAuD,GAAA,EAA6B,CAAAZ,EAAAe,EAAAzD,QAJf,MAAAU,GAAA6C,GAAA,EAAAC,EAAA9C,EAAA,aAAA4C,GAAAI,EAAA/C,QAAA+C,EAAA/C,SAAA,WAAA4C,EAAA,MAAAC,GAiDd9F,KAAKkD,QAAQlC,MAAMhB,KAAKsB,EAAG8B,sBACvBpD,KAAKkD,QAAQhH,OAAbgC,EAAA+H,MAA4BjG,KAAKkD,QAAQgD,mGCjSjD1J,EAAA,OAII2J,EAAQ,IAFZ3J,EAAA,IAEY6E,OAAU,IAmBhB+E,GACJC,KAAM,EACNC,SAAS,EACT7E,QAAS0E,EAAM1E,QACfG,KAAMuE,EAAMvE,KACZN,EAAG,GACHiF,UAAW,EAAG,cAGqB,WAGzB,IAFVvK,EAEUC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAFFmK,EACRhK,EACUH,UAAA,GACV,GAAoB,SAAhBG,EAAOE,KACT,IAAK,IAAIoB,EAAI,EAAGA,EAAI,EAAGA,IAAKyI,EAAMK,IAAIpK,EAAOqK,SAG/C,MAFoB,UAAhBrK,EAAOE,MAAkB6J,EAAMhD,SAAS/G,EAAOqK,UAGjDJ,KAhCS,SAACrK,EAAOI,GACnB,MAAoB,SAAhBA,EAAOE,KAAwBN,EAAQI,EAAOqK,QAC3CzK,EA8BCqK,CAAKrK,EAAMqK,KAAMjK,GACvBkK,QApCY,SAACtK,EAAOI,GAAR,MACE,iBAAhBA,EAAOE,MAA2BN,EAAQA,EAmC/BsK,CAAQtK,EAAMsK,QAASlK,GAChCqF,QAAS0E,EAAM1E,QACfG,KAAMuE,EAAMvE,KACZN,EA/BM,SAACtF,EAAOI,GAChB,MAAoB,UAAhBA,EAAOE,KAAyBF,EAAOqK,QACpCzK,EA6BFsF,CAAEtF,EAAMsF,EAAGlF,GACdmK,SAAUJ,EAAMO,kGC/CpB,MAAAC,EAAAnK,EAAA,wCAMA,IAAMoK,GAA8B,EAHpCpK,EAAA,GAGoCqK,aAAAC,EAAAnK,SAE9BoK,EAAW,KACJC,KAAKC,MAEhBL,EAAMM,UAAU,WACd,GAAIN,EAAMO,WAAWb,SAAwB,OAAbS,EAAmB,CACjD,IAAIzG,EAAO0G,KAAKC,MAChBF,EAAWK,YAAY,WACrB,IAAIH,EAAMD,KAAKC,MACXvG,EAAOJ,EACXA,EAAO2G,EACPL,EAAMS,UACJ/K,KAAM,OACNmK,SAAUQ,EAAMvG,GAAQ,QAIzBkG,EAAMO,WAAWb,SAAwB,OAAbS,IAC/BO,cAAcP,GACdA,EAAW,kBAKFH,uBC/BfW,EAAAC,EAAAD,QAAA/K,EAAA,GAAAA,EAAA,IAKAwE,MAAAwG,EAAA9J,EAAA,6JAAkL,KAGlL6J,EAAAE,QACAC,IAAA,iBACAC,GAAA,gBACAC,GAAA,qCCVA,IAAAC,EAAArL,EAAA,IAEA,iBAAAqL,QAAAL,EAAA9J,EAAAmK,EAAA,MAOA,IAAAC,GAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAA9L,GAEAK,EAAA,GAAAA,CAAAqL,EAAAC,GAEAD,EAAAJ,SAAAD,EAAAD,QAAAM,EAAAJ,qgBCjBAjL,EAAA,QACAA,EAAA,KACA0L,EAAA1L,EAAA,GACY2L,0JAAZ3L,EAAA,uDAEA,IAOM4L,EACAxJ,EALAS,EAAI,SAACgJ,GAAD,OAHI,IAGmBA,GAAKF,EAAGvE,YAAcuE,EAAG3J,KACpDgB,EAAI,SAAC6I,GAAD,OAHK,KAGoB,EAAIA,EAAI,IAErCC,GACAF,EAAKD,EAAGvE,YAAcuE,EAAG3J,GAAK2J,EAAG5J,GAAK4J,EAAG7J,GAAK6J,EAAG5J,GACjDK,aAAqBS,EAAE+I,GAAvB,IAA8B5I,EAAE4I,EAAKD,EAAG7J,GAAG,GAA3C,YACGiK,EAAA5L,QAAA6L,cAAA,QAAM5J,EAAGA,EAAG6J,UAAWC,EAAA/L,QAAMiL,iBAGvB,EAAAM,EAAAS,SAAQ,SAAApH,GAAA,OAAqBgF,SAArBhF,EAAGgF,WAAX,CACb,SAAAqC,GAA0B,IAAAC,EAAA3I,EAAA0I,EAAvBrC,SAAuB,GAAZjF,EAAYuH,EAAA,GAATzF,EAASyF,EAAA,GACxB,OACEN,EAAA5L,QAAA6L,cAAA,OAAKC,UAAWC,EAAA/L,QAAMmM,MACpBP,EAAA5L,QAAA6L,cAAA,OAAKO,MAAOA,IAAiBC,OAAQA,KACnCT,EAAA5L,QAAA6L,cAAA,KAAGR,UAAA,oBACDO,EAAA5L,QAAA6L,cAAA,QAAMC,UAAWC,EAAA/L,QAAMgL,GAAIoB,MAlBzB,IAkBuCC,OAjBtC,MAkBFV,EACDC,EAAA5L,QAAA6L,cAAA,UACES,EAAE,IACFR,UAAWC,EAAA/L,QAAM+K,IACjBM,UAAA,aAAwB3I,EAAEiC,GAA1B,IAAgC9B,EAAE4D,GAAlC,mNC5BNzG,sCCAR4K,EAAAC,EAAAD,QAAA/K,EAAA,GAAAA,EAAA,IAKAwE,MAAAwG,EAAA9J,EAAA,4tBAAivB,KAGjvB6J,EAAAE,QACAyB,KAAA,iBACAC,KAAA,iBACAC,OAAA,mBACA/C,KAAA,iBACAgD,IAAA,gBACAjK,KAAA,iBACA6F,OAAA,mBACAqE,GAAA,eACAC,GAAA,eACAxK,IAAA,gBACAyK,OAAA,mBACA5I,IAAA,qCCnBA,IAAAiH,EAAArL,EAAA,IAEA,iBAAAqL,QAAAL,EAAA9J,EAAAmK,EAAA,MAOA,IAAAC,GAAeC,KAAA,EAEfC,eAPAA,EAQAC,gBAAA9L,GAEAK,EAAA,GAAAA,CAAAqL,EAAAC,GAEAD,EAAAJ,SAAAD,EAAAD,QAAAM,EAAAJ,svBChBAgC,EAAAjN,EAAA,UACA0L,EAAA1L,EAAA,OACAA,EAAA,KAGAkN,EAAAlN,EAAA,IACA0B,EAAA1B,EAAA,QACAA,EAAA,OACAA,EAAA,yDAEA,IAOMiB,EACFQ,EANE0L,GAAS,EAAAD,EAAAE,eACZ1I,OAAO,EAHI,MAIX2I,QAAQ,EAAD3L,EAAAkC,IAeJ0J,GAZArM,EAPQ,IAOJsL,IACN9K,EAAIR,EAPU,EAiBJV,MAAM,EAAAmB,EAAAkC,GAAOe,KAAK,GACZxC,IAAI,SAACoL,EAAGrM,GAC1B,IAAIkB,EACFlB,YACUiM,EAAOjM,GADjB,SACiCiM,EAAOjM,GADxC,IAEQiM,EAAOjM,OAFf,OAE4BiM,EAAOjM,OAFnC,OAGF,OAAO6K,EAAA5L,QAAA6L,cAAA,QAAM5J,EAAGA,EAAG6J,UAAWuB,EAAArN,QAAMyC,KAAM6K,IAAKvM,OAG3CwM,quBACK,IAAAC,EAC4BnK,KAAKoK,MAAlC/K,EADC8K,EACD9K,EAAGG,EADF2K,EACE3K,EADF2K,EACKvK,YADLuK,EACkBhG,MAMzB,OAHA9E,EAAIsK,EAAOtK,GACXG,EAAImK,EAAOnK,GAGT+I,EAAA5L,QAAA6L,cAAA,QACER,UAAA,aAAwB3I,EAAxB,IAA6BG,EAA7B,IACAiJ,UAAWuB,EAAArN,QAAMoC,IACjBgK,MAAM,IACNC,OAAO,IACP3J,EAAE,KACFG,EAAE,2BAMK,EAAA0I,EAAAS,SACb,SAAApH,GAAA,OACE+E,QADF/E,EAAG+E,QAEDD,KAFF9E,EAAY8E,KAGVzE,KAHFL,EAAkBK,KAIhBN,EAJFC,EAAwBD,EAKtBiF,SALFhF,EAA2BgF,WAO3B,SAACc,GAAD,OACEgD,YADuB,WAErBhD,GAAW/K,KAAM,kBAEnBgO,KAJuB,SAIlBC,GACH,IAAIjJ,GAAKiJ,EAAEC,OAAOlI,MAClB+E,GAAW/K,KAAM,QAASmK,QAASnF,OAd1B,CAiBb,SAAAsH,GAAyE,IAAtEtC,EAAsEsC,EAAtEtC,QAAS+D,EAA6DzB,EAA7DyB,YAAazI,EAAgDgH,EAAhDhH,KAAMN,EAA0CsH,EAA1CtH,EAAGgJ,EAAuC1B,EAAvC0B,KAAuCzB,EAAA3I,EAAA0I,EAAjCrC,SAAiC,GAAtBkE,EAAsB5B,EAAA,GAAd6B,EAAc7B,EAAA,GACzE,OACEN,EAAA5L,QAAA6L,cAAA,OAAKC,UAAWuB,EAAArN,QAAMuM,MACpBX,EAAA5L,QAAA6L,cAAA,OAAKC,UAAWuB,EAAArN,QAAM6M,QACpBjB,EAAA5L,QAAA6L,cAAA,OAAKC,UAAWuB,EAAArN,QAAMyM,OAAQuB,QAASN,GACpC/D,EAAU,KAAO,OAEpBiC,EAAA5L,QAAA6L,cAAA,SACElM,KAAK,QACLsO,IAAI,IACJC,IAAK3M,EAAA0F,YAAA1F,EAAAM,GAAmB,EACxBsM,KAAK,IACLxI,MAAOhB,EACPyJ,SAAUT,IAEZ/B,EAAA5L,QAAA6L,cAAA,kBAAUiC,EAAOO,QAAQ,IACzBzC,EAAA5L,QAAA6L,cAAA,kBAAUkC,EAAOM,QAAQ,KAE3BzC,EAAA5L,QAAA6L,cAAA,OAAKC,UAAWuB,EAAArN,QAAMiE,KACpB2H,EAAA5L,QAAA6L,cAAA,OAAKC,UAAWuB,EAAArN,QAAM0M,KACpBd,EAAA5L,QAAA6L,cAAA,KAAGR,UAAU,oBACV8B,EACDvB,EAAA5L,QAAA6L,cAAA,SACG5G,EAAKjD,IAAI,SAAAC,GAAA,OACR2J,EAAA5L,QAAA6L,cAAC0B,GACC7K,EAAGT,EAAES,EACLG,EAAGZ,EAAEY,EACLyK,IAAKrL,EAAEe,GACPC,YAAahB,EAAEgB,mBAMzB2I,EAAA5L,QAAA6L,cAAAyC,EAAAtO,QAAA,kNC9GAA,kDCCR,QAAAH,EAAA,IACA0L,EAAA1L,EAAA,GACA0O,EAAA1O,EAAA,QACAA,EAAA,SACAA,EAAA,wDAEA,IAAM2O,EAAYC,SAASC,eAAe,QAC1C,IAAKF,EAAW,MAAM1F,MAAM,sBAE5B,EAAAyF,EAAAI,QACE/C,EAAA5L,QAAA6L,cAAAN,EAAAqD,UAAU3E,MAAA4E,EAAA7O,SACR4L,EAAA5L,QAAA6L,cAAAiD,EAAA9O,QAAA,OAEFwO,oFCbWlK,QAAQ,GACRb,IAAI,EACJwD,cAAc,GACdpF,KAAK,KAHX,IAIMF,OAAK,EACLC,IAAID,EAAG,EACPiG,OAAO,GACP0B,OAAO","file":"main.js","sourcesContent":["//@flow\nimport moize from \"moize\";\n\nexport const binder = moize((fn, ...args1) => (...args2) =>\n  fn(...args1, ...args2)\n);\n\nexport const get = (path: string): any => {\n  let split = path.split(\".\");\n  let l = split.length;\n  return a => {\n    for (var i = 0; i < l; i++) a = a[split[i]];\n    return a;\n  };\n};\n\nexport const upo = (oldObject: {}, newValues: {}) =>\n  Object.assign({}, oldObject, newValues);\n\nimport type { Reducer } from \"src/types/Reducer\";\n\nexport function createReducer<S, A: *>(\n  initialState: S,\n  handlers: { [key: string]: Reducer<S, A> }\n): Reducer<S, A> {\n  return function reducer(state: S = initialState, action: A): S {\n    return handlers.hasOwnProperty(action.type)\n      ? handlers[action.type](state, action)\n      : state;\n  };\n}\n\nexport const mod = (a: number, b: number): number => (a % b + b) % b;\n// .mod = function(n) {\n//   return ((this%n)+n)%n;\n// };\n","//@flow\n\nimport { N, CYCLE, LANE_LENGTH, W, SJ, VF, TURN, HIST } from \"src/constants\";\nimport uniqueId from \"lodash/uniqueId\";\nimport { mod } from \"src/utils\";\nimport mc from \"material-colors\";\ntype Orientation = \"ns\" | \"ew\";\ntype Direction = \"n\" | \"s\" | \"e\" | \"w\";\ntype Coord = [number, number];\n\nconst vs = (() => {\n  const a = VF / W + 1,\n    b = W / SJ;\n  return (s: number) => {\n    if (s < SJ) return 0;\n    else if (s >= a) return VF;\n    else return b * (s - SJ);\n  };\n})();\n\nconst getColor = (() => {\n  const colors = [\n    \"red\",\n    \"blue\",\n    \"green\",\n    \"orange\",\n    \"pink\",\n    \"purple\",\n    \"lightBlue\",\n    \"teal\"\n  ].map(d => mc[d][\"200\"]);\n  const l = colors.length - 1;\n  let i = 0;\n  return () => colors[i++ % l];\n})();\n\nexport type Car = {\n  id: string,\n  pos: number,\n  x: number,\n  y: number,\n  lane: string,\n  orientation: Orientation,\n  color: string,\n  nextTimeTurning: boolean\n};\n\ntype Node = {\n  car: Car,\n  next: Node | null,\n  prev: Node | null\n};\n\nconst makeNode = (car): Node => ({ car, next: null, prev: null });\n\n// class Car\n\nconst makeCar = (pos: number, lane: Lane): Car => {\n  let x = lane.x0 + pos / LANE_LENGTH * (lane.x1 - lane.x0);\n  let y = lane.y0 + pos / LANE_LENGTH * (lane.y1 - lane.y0);\n  return {\n    id: uniqueId(),\n    color: getColor(),\n    pos,\n    x,\n    y,\n    lane: lane.id,\n    orientation: lane.orientation,\n    nextTimeTurning: Math.random() <= TURN\n  };\n};\n\nconst moveCar = (car: Car, pos: number, lane: Lane): void => {\n  car.x = lane.x0 + pos / LANE_LENGTH * (lane.x1 - lane.x0);\n  car.y = lane.y0 + pos / LANE_LENGTH * (lane.y1 - lane.y0);\n  car.pos = pos;\n  car.lane = lane.id;\n  car.orientation = lane.orientation;\n};\n\nexport class Lane {\n  first: Node | null;\n  last: Node | null;\n  direction: Direction;\n  orientation: Orientation;\n  x0: number;\n  y0: number;\n  x1: number;\n  y1: number;\n  a: Coord;\n  b: Coord;\n  id: string;\n  constructor(a: Coord, b: Coord, direction: Direction) {\n    let [y0, x0] = a;\n    let [y1, x1] = b;\n    if (x1 === 0 && x0 === N - 1) x1 = N;\n    else if (y1 === 0 && y0 === N - 1) y1 = N;\n    else if (y1 === N - 1 && y0 === 0) y0 = N;\n    else if (x1 === N - 1 && x0 === 0) x0 = N;\n    Object.assign(this, {\n      first: null,\n      last: null,\n      direction,\n      a,\n      b,\n      x0,\n      y0,\n      x1,\n      y1,\n      id: uniqueId(),\n      orientation: \"ns\".includes(direction) ? \"ns\" : \"ew\"\n    });\n  }\n\n  unshift(car: Car) {\n    let node = makeNode(car);\n    if (this.first === null) {\n      this.first = this.last = node;\n    } else {\n      let temp = this.first;\n      this.first = node;\n      node.next = temp;\n      temp.prev = node;\n    }\n  }\n\n  push(car: Car) {\n    var node = makeNode(car);\n    if (this.first === null) {\n      this.first = this.last = node;\n    } else {\n      var temp = this.last;\n      this.last = node;\n      node.prev = temp;\n      temp.next = node;\n    }\n  }\n\n  pop(): ?Node {\n    if (this.last === null) {\n      return null;\n    }\n    let temp = this.last;\n    this.last = this.last.prev;\n    if (this.last) this.last.next = null;\n    else this.first = null;\n    return temp;\n  }\n}\n\nexport class Signal {\n  row: number;\n  col: number;\n  orientation: Orientation;\n  t: number;\n  id: string;\n  lanesOut: Array<Lane>;\n  constructor(row: number, col: number) {\n    Object.assign(this, {\n      row,\n      col,\n      orientation: \"ns\",\n      t: 0,\n      id: uniqueId(),\n      lanesOut: []\n    });\n  }\n  addLaneOut(lane: Lane) {\n    this.lanesOut.push(lane);\n  }\n  tick() {\n    this.t = (this.t + 1) % CYCLE;\n    if (this.t > CYCLE / 2) this.orientation = \"ew\";\n    else this.orientation = \"ns\";\n  }\n}\n\nconst range = Array(N)\n  .fill(0)\n  .map((d, i) => i);\n\nconst even = (d: number) => d % 2 === 0;\n\nexport class Graph {\n  matrix: Array<Array<Signal>>;\n  signals: Array<Signal>;\n  lanes: Array<Lane>;\n  cars: Array<Car>;\n  history: Array<[number, number]>;\n  k: number;\n\n  getMFDState(): [number, number] {\n    let l = this.history.length;\n    let k = 0,\n      q = 0;\n    for (let d of this.history) (k += d[0]), (q += d[1]);\n    return [k / l, q / l];\n  }\n\n  makeCars(k: number) {\n    this.k = k;\n    let carsPerLane = k; //distance normalized to lane length\n    this.cars = [];\n    let space = LANE_LENGTH / carsPerLane;\n    for (let lane of this.lanes) {\n      lane.first = lane.last = null;\n      for (var i = 0; i < carsPerLane; i++) {\n        let pos = i * space;\n        let newCar = makeCar(pos, lane);\n        lane.push(newCar);\n        this.cars.push(newCar);\n      }\n    }\n  }\n\n  constructor(k: number) {\n    //create signals matrix\n    this.matrix = range.map(row => range.map(col => new Signal(row, col)));\n    this.signals = [].concat(...this.matrix);\n    this.cars = [];\n    this.lanes = [];\n\n    //add lanes\n    for (let row of range)\n      for (let col of range)\n        for (let or of [\"ns\", \"ew\"]) {\n          let direction =\n            or === \"ns\" ? (even(col) ? \"s\" : \"n\") : even(row) ? \"e\" : \"w\";\n          let b =\n            or === \"ns\"\n              ? [mod(even(col) ? row + 1 : row - 1, N), col]\n              : [row, mod(even(row) ? col + 1 : col - 1, N)];\n          let lane = new Lane([row, col], b, direction);\n          this.matrix[row][col].addLaneOut(lane);\n          this.lanes.push(lane);\n        }\n    this.history = [[k, 0]];\n    this.makeCars(k);\n  }\n\n  run(dt: number) {\n    let queue: Array<[Lane, Lane, Car]> = [];\n    for (let signal of this.signals) signal.tick();\n    let q = 0;\n    for (let lane of this.lanes) {\n      let temp = lane.first;\n      let signal = this.matrix[lane.b[0]][lane.b[1]];\n      let signalOpen = signal.orientation.includes(lane.direction);\n      while (temp) {\n        let { car, next } = temp;\n        let dx = 0;\n        if (next) {\n          dx = vs(next.car.pos - car.pos);\n          moveCar(car, car.pos + dx, lane);\n        }\n        if (!next) {\n          let distanceRemaining = LANE_LENGTH - car.pos;\n          if (!signalOpen) {\n            dx = vs(distanceRemaining);\n            moveCar(car, car.pos + dx, lane);\n          } else {\n            let turning = Math.random() < TURN;\n            let nextLane = signal.lanesOut.find(\n              d => (d.orientation === lane.orientation) !== turning\n            );\n            if (!nextLane) throw Error(\"error in finding lane\");\n            if (!nextLane.first) {\n              lane.pop();\n              dx = VF;\n              moveCar(car, VF - distanceRemaining, nextLane);\n              // car.nextTimeTurning =\n              nextLane.unshift(car);\n            } else {\n              dx = vs(nextLane.first.car.pos + distanceRemaining);\n              if (dx > distanceRemaining) {\n                lane.pop();\n                moveCar(car, dx - distanceRemaining, nextLane);\n                // car.nextTimeTurning = Math.random() <= TURN;\n                nextLane.unshift(car);\n              } else {\n                moveCar(car, car.pos + dx, lane);\n              }\n            }\n          }\n        }\n        q += dx;\n        temp = next;\n      }\n    }\n    this.history.push([this.k, q / N / LANE_LENGTH]);\n    if (this.history.length > HIST) this.history.shift();\n  }\n}\n","//@flow\nimport { combineReducers } from \"redux\";\n// import { createReducer as CR } from \"src/utils\";\nimport { Graph } from \"src/models\";\n\nlet model = new Graph(10);\n\nconst timerOn = (state, action) =>\n  action.type === \"TIMER_TOGGLE\" ? !state : state;\n\nconst time = (state, action) => {\n  if (action.type === \"TICK\") return state + action.payload;\n  return state;\n};\n\nconst k = (state, action) => {\n  if (action.type === \"SET_K\") return action.payload;\n  return state;\n};\n\nimport type { State } from \"src/types/State\";\nimport type { Action } from \"src/types/Action\";\nimport type { Reducer } from \"src/types/Reducer\";\n\nconst defaultState: State = {\n  time: 0,\n  timerOn: false,\n  signals: model.signals,\n  cars: model.cars,\n  k: 10,\n  mfdState: [0, 0]\n};\n\nconst root: Reducer<State, Action> = (\n  state = defaultState,\n  action: Action\n): State => {\n  if (action.type === \"TICK\")\n    for (var i = 0; i < 1; i++) model.run(action.payload);\n  if (action.type === \"SET_K\") model.makeCars(action.payload);\n\n  return {\n    time: time(state.time, action),\n    timerOn: timerOn(state.timerOn, action),\n    signals: model.signals,\n    cars: model.cars,\n    k: k(state.k, action),\n    mfdState: model.getMFDState()\n  };\n};\nexport default root;\n","import root from \"src/reducers/root\";\nimport type { Action } from \"src/types/Action\";\nimport type { State } from \"src/types/State\";\nimport { createStore } from \"redux\";\nimport type { Store } from \"redux\";\n\nconst store: Store<State, Action> = createStore(root);\n{\n  let interval = null;\n  let last = Date.now();\n\n  store.subscribe(() => {\n    if (store.getState().timerOn && interval === null) {\n      var last = Date.now();\n      interval = setInterval(() => {\n        let now = Date.now();\n        let temp = last;\n        last = now;\n        store.dispatch({\n          type: \"TICK\",\n          payload: (now - temp) / 100\n        });\n      });\n    }\n    if (!store.getState().timerOn && interval !== null) {\n      clearInterval(interval);\n      interval = null;\n    }\n  });\n}\n\nexport default store;\n","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".stylePlot__dot {\\n  fill: #03a9f4;\\n  stroke: white; }\\n\\n.stylePlot__bg {\\n  fill: #616161; }\\n\\n.stylePlot__fd {\\n  fill: none;\\n  stroke: #e91e63; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"dot\": \"stylePlot__dot\",\n\t\"bg\": \"stylePlot__bg\",\n\t\"fd\": \"stylePlot__fd\"\n};","\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]!../../../node_modules/sass-loader/lib/loader.js!./stylePlot.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]!../../../node_modules/sass-loader/lib/loader.js!./stylePlot.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]!../../../node_modules/sass-loader/lib/loader.js!./stylePlot.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React from \"react\";\nimport style from \"./stylePlot\";\nimport { connect } from \"react-redux\";\nimport * as CN from \"src/constants\";\n\nconst width = 400;\nconst height = 300;\nconst mar = 10;\nconst x = (v: number) => width * v / (CN.LANE_LENGTH / CN.SJ);\nconst y = (v: number) => height * (1 - v / 6);\n\nconst FDLine = (() => {\n  let K0 = CN.LANE_LENGTH / CN.SJ * CN.W / (CN.VF + CN.W);\n  let d = `M0,${height} L${x(K0)},${y(K0 * CN.VF/2)} L${width},${height}`;\n  return <path d={d} className={style.fd} />;\n})();\n\nexport default connect(({ mfdState }) => ({ mfdState }))(\n  ({ mfdState: [k, q] }) => {\n    return (\n      <div className={style.plot}>\n        <svg width={width + 2 * mar} height={height + 2 * mar}>\n          <g transform={`translate(${mar},${mar})`}>\n            <rect className={style.bg} width={width} height={height} />\n            {FDLine}\n            <circle\n              r=\"5\"\n              className={style.dot}\n              transform={`translate(${x(k)},${y(q)})`}\n            />\n          </g>\n        </svg>\n      </div>\n    );\n  }\n);\n","export {default} from './Plot.js'","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"body {\\n  background: #9e9e9e; }\\n\\n.styleApp__main {\\n  padding: 5px; }\\n\\n.styleApp__text {\\n  font-size: 18px; }\\n\\n.styleApp__button {\\n  padding: 5px;\\n  background: white;\\n  color: black;\\n  cursor: pointer;\\n  display: inline-block; }\\n\\n.styleApp__time {\\n  font-size: 18px; }\\n\\n.styleApp__svg {\\n  width: 620px;\\n  height: 620px; }\\n\\n.styleApp__lane {\\n  stroke: #444;\\n  stroke-width: 10px; }\\n\\n.styleApp__signal.styleApp__ns {\\n  fill: #e91e63; }\\n\\n.styleApp__signal.styleApp__ew {\\n  fill: #99d3e7; }\\n\\n.styleApp__car {\\n  fill: #f48fb1; }\\n\\nsvg {\\n  display: inline-block; }\\n\\n.styleApp__inputs span {\\n  padding: 5px; }\\n\\n.styleApp__row {\\n  display: flex; }\\n  .styleApp__row > div {\\n    margin: 5px; }\\n\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"main\": \"styleApp__main\",\n\t\"text\": \"styleApp__text\",\n\t\"button\": \"styleApp__button\",\n\t\"time\": \"styleApp__time\",\n\t\"svg\": \"styleApp__svg\",\n\t\"lane\": \"styleApp__lane\",\n\t\"signal\": \"styleApp__signal\",\n\t\"ns\": \"styleApp__ns\",\n\t\"ew\": \"styleApp__ew\",\n\t\"car\": \"styleApp__car\",\n\t\"inputs\": \"styleApp__inputs\",\n\t\"row\": \"styleApp__row\"\n};","\nvar content = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]!../../../node_modules/sass-loader/lib/loader.js!./styleApp.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]!../../../node_modules/sass-loader/lib/loader.js!./styleApp.scss\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js?modules&importLoaders=1&localIdentName=[name]__[local]!../../../node_modules/sass-loader/lib/loader.js!./styleApp.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","//@flow\nimport React, { PureComponent } from \"react\";\nimport { connect } from \"react-redux\";\nimport style from \"./styleApp.scss\";\nimport type { State } from \"src/types/State\";\nimport type { Dispatch } from \"src/types/Dispatch\";\nimport { scaleLinear } from \"d3-scale\";\nimport { N, LANE_LENGTH, SJ } from \"src/constants\";\nimport classnames from \"classnames\";\nimport Plot from \"src/components/Plot\";\n\nconst width = 450;\nconst lineWidth = 5;\nconst scale2 = scaleLinear()\n  .range([0, width])\n  .domain([0, N]);\n\nconst scale = (() => {\n  let a = width / N,\n    b = a - lineWidth,\n    c = lineWidth / 2;\n  return v => {\n    let v0 = v | 0;\n    // if (v0 === v && v0 > 0) return (v0 - 1) * a + c + b;\n    let v1 = v - v0;\n    return v0 * a + v1 * b + c;\n  };\n})();\n\nconst range = Array(2 * N).fill(0);\nconst Lanes = range.map((_, i) => {\n  let d =\n    i < N\n      ? `M0,${scale2(i)} L${width},${scale2(i)}`\n      : `M${scale2(i % N)},0 L${scale2(i % N)},${width}`;\n  return <path d={d} className={style.lane} key={i} />;\n});\n\nclass CarComponent extends PureComponent {\n  render() {\n    let { x, y, orientation, color } = this.props;\n    // if (orientation === \"ns\") (x = scale2(x)), (y = scale(y));\n    // else (x = scale(x)), (y = scale2(y));\n    x = scale2(x);\n    y = scale2(y);\n\n    return (\n      <rect\n        transform={`translate(${x},${y})`}\n        className={style.car}\n        width=\"2\"\n        height=\"2\"\n        x=\"-1\"\n        y=\"-1\"\n      />\n    );\n  }\n}\n\nexport default connect(\n  ({ timerOn, time, cars, k, mfdState }) => ({\n    timerOn,\n    time,\n    cars,\n    k,\n    mfdState\n  }),\n  (dispatch: Dispatch) => ({\n    timerToggle() {\n      dispatch({ type: \"TIMER_TOGGLE\" });\n    },\n    setK(e) {\n      let k = +e.target.value;\n      dispatch({ type: \"SET_K\", payload: k });\n    }\n  })\n)(({ timerOn, timerToggle, cars, k, setK, mfdState: [kState, qState] }) => {\n  return (\n    <div className={style.main}>\n      <div className={style.inputs}>\n        <div className={style.button} onClick={timerToggle}>\n          {timerOn ? \"ON\" : \"OFF\"}\n        </div>\n        <input\n          type=\"range\"\n          min=\"0\"\n          max={LANE_LENGTH / SJ - 1}\n          step=\"1\"\n          value={k}\n          onChange={setK}\n        />\n        <span>k: {kState.toFixed(2)}</span>\n        <span>q: {qState.toFixed(2)}</span>\n      </div>\n      <div className={style.row}>\n        <svg className={style.svg}>\n          <g transform=\"translate(10,10)\">\n            {Lanes}\n            <g>\n              {cars.map(d => (\n                <CarComponent\n                  x={d.x}\n                  y={d.y}\n                  key={d.id}\n                  orientation={d.orientation}\n                />\n              ))}\n            </g>\n          </g>\n        </svg>\n        <Plot />\n      </div>\n    </div>\n  );\n});\n","export {default} from './App';","//@flow\nimport React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { render } from \"react-dom\";\nimport App from \"src/components/App\";\nimport store from './store';\n\nconst container = document.getElementById(\"root\");\nif (!container) throw Error(\"no root container\");\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  container\n);\n","//@flow\nexport const CYCLE = 10;\nexport const N = 7;\nexport const LANE_LENGTH = 40;\nexport const SJ = 1.25;\nexport const VF = 2;\nexport const W = VF/2;\nexport const TURN = 0.3;\nexport const HIST = 30;\n"],"sourceRoot":""}